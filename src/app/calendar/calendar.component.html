<span #container
      [ngClass]="{ 'p-calendar': true, 'p-calendar-w-btn': showIcon, 'p-calendar-timeonly': timeOnly, 'p-calendar-disabled': disabled, 'p-focus': focus }"
      [ngStyle]="style" [class]="styleClass">
            <ng-template [ngIf]="!inline && inputId == 'range'">
              <div class="calendar-input-container mr"
                   [ngClass]="{'calendar-input-container-focus ': nowInputId === 'range1' }"
                   (click)="onInputClick()">
                <input class="calendar-input"
                       #inputfield
                       type="text"
                       [attr.id]="inputId + 1"
                       [attr.name]="name"
                       [attr.required]="required"
                       [attr.aria-required]="required"
                       [value]="inputFieldValue"
                       (focus)="onInputFocus($event)"
                       (keydown)="onInputKeydown($event)"
                       (blur)="onInputBlur($event)"
                       [readonly]="readonlyInput"
                       (input)="onUserInput($event)"
                       [ngStyle]="inputStyle"
                       [class]="inputStyleClass"
                       [placeholder]="placeholder || 'Туда'"
                       [disabled]="disabled"
                       [attr.tabindex]="tabindex"
                       [attr.inputmode]="touchUI ? 'off' : null"
                       [ngClass]="'p-inputtext p-component'"
                       autocomplete="off"
                       [attr.aria-labelledby]="ariaLabelledBy"
                />
                    <svg-icon
                      *ngIf="inputFieldValue != null"
                      [src]="'./assets/icons/close.svg'"
                      (click)="clear('startDate')"
                    ></svg-icon>
                   <svg-icon
                     *ngIf="inputFieldValue === null"
                     [src]="'./assets/icons/Calendar.svg'"
                   ></svg-icon>
              </div>
              <div class="calendar-input-container"
                   [ngClass]="{'calendar-input-container-focus ': nowInputId === 'range2' }"
                   (click)="onInputClick()">
                 <input
                   class="calendar-input"
                   #inputfield2
                   type="text"
                   [attr.id]="inputId + 2"
                   [attr.name]="name"
                   [attr.required]="required"
                   [attr.aria-required]="required"
                   [value]="endDate"
                   (focus)="onInputFocus($event)"
                   (keydown)="onInputKeydown($event)"
                   (blur)="onInputBlur($event)"
                   [readonly]="readonlyInput"
                   (input)="onUserInput($event)"
                   [ngStyle]="inputStyle"
                   [class]="inputStyleClass"
                   [placeholder]="placeholder || 'Обратно'"
                   [disabled]="disabled"
                   [attr.tabindex]="tabindex"
                   [attr.inputmode]="touchUI ? 'off' : null"
                   [ngClass]="'p-inputtext p-component'"
                   autocomplete="off"
                   [attr.aria-labelledby]="ariaLabelledBy"
                 />
              <svg-icon
                *ngIf="endDate != null"
                [src]="'./assets/icons/close.svg'"
                (click)="clear('endDate')"
              ></svg-icon>
                   <svg-icon
                     *ngIf="endDate === null"
                     [src]="'./assets/icons/Calendar.svg'"
                   ></svg-icon>
              </div>

<!--                <i *ngIf="showClear && !disabled && value != null" class="p-calendar-clear-icon pi pi-times"-->
<!--                   (click)="clear()"></i>-->
                <button type="button" [attr.aria-label]="iconAriaLabel" *ngIf="showIcon"
                        (click)="onButtonClick($event, inputfield)" class="p-datepicker-trigger" [disabled]="disabled"
                        tabindex="0"></button>
            </ng-template>
         <ng-template [ngIf]="!inline && inputId == 'simple'">
              <input
                #inputfield
                type="text"
                [attr.id]="inputId"
                [attr.name]="name"
                [attr.required]="required"
                [attr.aria-required]="required"
                [value]="inputFieldValue"
                (focus)="onInputFocus($event)"
                (keydown)="onInputKeydown($event)"
                (click)="onInputClick()"
                (blur)="onInputBlur($event)"
                [readonly]="readonlyInput"
                (input)="onUserInput($event)"
                [ngStyle]="inputStyle"
                [class]="inputStyleClass"
                [placeholder]="placeholder || ''"
                [disabled]="disabled"
                [attr.tabindex]="tabindex"
                [attr.inputmode]="touchUI ? 'off' : null"
                [ngClass]="'p-inputtext p-component'"
                autocomplete="off"
                [attr.aria-labelledby]="ariaLabelledBy"
              />
<!--                <i *ngIf="showClear && !disabled && value != null" class="p-calendar-clear-icon pi pi-times"-->
<!--                   (click)="clear()"></i>-->
                <button type="button" [attr.aria-label]="iconAriaLabel" *ngIf="showIcon"
                        (click)="onButtonClick($event, inputfield)" class="p-datepicker-trigger" [disabled]="disabled"
                        tabindex="0"></button>
            </ng-template>
            <div
              #contentWrapper
              [class]="panelStyleClass"
              [ngStyle]="panelStyle"
              [ngClass]="{
                    'p-datepicker p-component': true,
                    'p-datepicker-inline': inline,
                    'p-disabled': disabled,
                    'p-datepicker-timeonly': timeOnly,
                    'p-datepicker-multiple-month': this.numberOfMonths > 1,
                    'p-datepicker-monthpicker': view === 'month',
                    'p-datepicker-touch-ui': touchUI
                }"
              [@overlayAnimation]="
                    touchUI
                        ? { value: 'visibleTouchUI', params: { showTransitionParams: showTransitionOptions, hideTransitionParams: hideTransitionOptions } }
                        : { value: 'visible', params: { showTransitionParams: showTransitionOptions, hideTransitionParams: hideTransitionOptions } }
                "
              [@.disabled]="inline === true"
              (@overlayAnimation.start)="onOverlayAnimationStart($event)"
              (@overlayAnimation.done)="onOverlayAnimationDone($event)"
              (click)="onOverlayClick($event)"
              *ngIf="inline || overlayVisible">
                <ng-content select="p-header"></ng-content>
                <ng-container *ngTemplateOutlet="headerTemplate"></ng-container>
                <ng-container *ngIf="!timeOnly">
                  <div class="datepicker">
                    <div class="datepicker-header">
                      <div
                        class="datepicker-header-title">{{nowInputId === 'range1' ? 'Выберите дату отправления' : 'Выберите дату возвращения'}}</div>
                      <div>
                        <button [disabled]="nowInputId != 'range2' && inputFieldValue === null"
                                (click)="withoutBack()"
                                class="datepicker-header-btn" >Без обратного билета</button>
                      </div>
                    </div>
                    <div class="p-datepicker-group-container">
                        <div class="p-datepicker-group datepicker-group" *ngFor="let month of months; let i = index">
                            <div class="p-datepicker-header">
                                <button (keydown)="onContainerButtonKeydown($event)" class="p-datepicker-prev p-link"
                                        (click)="onPrevButtonClick($event)" *ngIf="i === 0" type="button">
                                  <svg-icon class="datepicker-prev-icon" src="./assets/icons/arrow.svg"></svg-icon>
                                </button>
                                <div class="p-datepicker-title">
                                    <button type="button" (click)="switchToMonthView($event)"
                                            (keydown)="onContainerButtonKeydown($event)" *ngIf="currentView === 'date'"
                                            class="p-datepicker-month p-link" [disabled]="switchViewButtonDisabled()">
                                        {{ getMonthName(month.month) }}
                                    </button>
                                    <button type="button" (click)="switchToYearView($event)"
                                            (keydown)="onContainerButtonKeydown($event)" *ngIf="currentView !== 'year'"
                                            class="p-datepicker-year p-link" [disabled]="switchViewButtonDisabled()">
                                        {{ getYear(month) }}
                                    </button>
                                    <span class="p-datepicker-decade" *ngIf="currentView === 'year'">
                                        <ng-container *ngIf="!decadeTemplate">{{ yearPickerValues()[0] }}
                                          - {{ yearPickerValues()[yearPickerValues().length - 1] }}</ng-container>
                                        <ng-container
                                          *ngTemplateOutlet="decadeTemplate; context: { $implicit: yearPickerValues }"></ng-container>
                                    </span>
                                </div>
                                <button
                                  (keydown)="onContainerButtonKeydown($event)"
                                  class="p-datepicker-next p-link"
                                  (click)="onNextButtonClick($event)"
                                  [style.display]="numberOfMonths === 1 ? 'inline-flex' : i === numberOfMonths - 1 ? 'inline-flex' : 'none'"
                                  type="button">
                                  <svg-icon src="./assets/icons/arrow.svg"></svg-icon>
                                </button>
                            </div>
                            <div class="p-datepicker-calendar-container" *ngIf="currentView === 'date'">
                                <table class="p-datepicker-calendar">
                                    <thead>
                                        <tr>
                                            <th *ngIf="showWeek" class="p-datepicker-weekheader p-disabled">
                                                <span>{{ getTranslation('weekHeader') }}</span>
                                            </th>
                                            <th class="datepicker-weekheader" scope="col"
                                                *ngFor="let weekDay of weekDays; let begin = first; let end = last">
                                                <span class="datepicker-weekheader-title">{{ weekDay }}</span>
                                            </th>
                                        </tr>
                                    </thead>
                                    <tbody (mouseleave)="leaveFromDate()">
                                        <tr class="datepicker-weeknumber"
                                            *ngFor="let week of month.dates; let j = index">
                                            <td *ngIf="showWeek" class="p-datepicker-weeknumber">
                                                <span class="p-disabled">
                                                    {{ month.weekNumbers[j] }}
                                                </span>
                                            </td>
                                            <td *ngFor="let date of week"
                                                [ngClass]="{ 'p-datepicker-other-month': date.otherMonth, 'p-datepicker-today': date.today }">
                                                <ng-container *ngIf="date.otherMonth ? showOtherMonths : true">
                                                    <span
                                                      class="datepicker-weeknumber-title"
                                                      (mouseenter)="hoverRange($event, date)"
                                                      [ngClass]="{ 'p-highlight': isSelected(date), 'p-active': date?.isIntoRange,'p-disabled': !date.selectable }"
                                                      (click)="onDateSelect($event, date)" draggable="false"
                                                      (keydown)="onDateCellKeydown($event, date, i)" pRipple>
                                                      <div>
                                                        <ng-container
                                                          *ngIf="!dateTemplate">{{ date.day }}
                                                          <div *ngIf="ticketPrices[date.month]" [ngClass]="{ 'p-highlight': isSelected(date)}"
                                                               [style.color]="ticketPrices[date.month][date.day]?.color"
                                                               class="datepicker-sum">{{ticketPrices[date.month][date.day]?.price}}</div>
                                                        </ng-container>
                                                        <ng-container
                                                          *ngTemplateOutlet="dateTemplate; context: { $implicit: date }"></ng-container>
                                                      </div>

                                                    </span>
                                                </ng-container>
                                            </td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                    <div class="p-monthpicker" *ngIf="currentView === 'month'">
                        <span
                          *ngFor="let m of monthPickerValues(); let i = index"
                          (click)="onMonthSelect($event, i)"
                          (keydown)="onMonthCellKeydown($event, i)"
                          class="p-monthpicker-month"
                          [ngClass]="{ 'p-highlight': isMonthSelected(i), 'p-disabled': isMonthDisabled(i) }"
                          pRipple
                        >
                            {{ m }}
                        </span>
                    </div>
                    <div class="p-yearpicker" *ngIf="currentView === 'year'">
                        <span *ngFor="let y of yearPickerValues()" (click)="onYearSelect($event, y)"
                              (keydown)="onYearCellKeydown($event, y)" class="p-yearpicker-year"
                              [ngClass]="{ 'p-highlight': isYearSelected(y) }" pRipple>
                            {{ y }}
                        </span>
                    </div>
                  </div>

                </ng-container>
                <div class="p-timepicker" *ngIf="(showTime || timeOnly) && currentView === 'date'">
                    <div class="p-hour-picker">
                        <button
                          class="p-link"
                          type="button"
                          (keydown)="onContainerButtonKeydown($event)"
                          (keydown.enter)="incrementHour($event)"
                          (keydown.space)="incrementHour($event)"
                          (mousedown)="onTimePickerElementMouseDown($event, 0, 1)"
                          (mouseup)="onTimePickerElementMouseUp($event)"
                          (keyup.enter)="onTimePickerElementMouseUp($event)"
                          (keyup.space)="onTimePickerElementMouseUp($event)"
                          (mouseleave)="onTimePickerElementMouseLeave()"
                          pRipple
                        >
                            <span class="pi pi-chevron-up"></span>
                        </button>
                        <span><ng-container *ngIf="currentHour < 10">0</ng-container>
                          {{ currentHour }}</span>
                        <button
                          class="p-link"
                          type="button"
                          (keydown)="onContainerButtonKeydown($event)"
                          (keydown.enter)="decrementHour($event)"
                          (keydown.space)="decrementHour($event)"
                          (mousedown)="onTimePickerElementMouseDown($event, 0, -1)"
                          (mouseup)="onTimePickerElementMouseUp($event)"
                          (keyup.enter)="onTimePickerElementMouseUp($event)"
                          (keyup.space)="onTimePickerElementMouseUp($event)"
                          (mouseleave)="onTimePickerElementMouseLeave()"
                          pRipple
                        >
                            <span class="pi pi-chevron-down"></span>
                        </button>
                    </div>
                    <div class="p-separator">
                        <span>{{ timeSeparator }}</span>
                    </div>
                    <div class="p-minute-picker">
                        <button
                          class="p-link"
                          type="button"
                          (keydown)="onContainerButtonKeydown($event)"
                          (keydown.enter)="incrementMinute($event)"
                          (keydown.space)="incrementMinute($event)"
                          (mousedown)="onTimePickerElementMouseDown($event, 1, 1)"
                          (mouseup)="onTimePickerElementMouseUp($event)"
                          (keyup.enter)="onTimePickerElementMouseUp($event)"
                          (keyup.space)="onTimePickerElementMouseUp($event)"
                          (mouseleave)="onTimePickerElementMouseLeave()"
                          pRipple
                        >
                            <span class="pi pi-chevron-up"></span>
                        </button>
                        <span><ng-container *ngIf="currentMinute < 10">0</ng-container>
                          {{ currentMinute }}</span>
                        <button
                          class="p-link"
                          type="button"
                          (keydown)="onContainerButtonKeydown($event)"
                          (keydown.enter)="decrementMinute($event)"
                          (keydown.space)="decrementMinute($event)"
                          (mousedown)="onTimePickerElementMouseDown($event, 1, -1)"
                          (mouseup)="onTimePickerElementMouseUp($event)"
                          (keyup.enter)="onTimePickerElementMouseUp($event)"
                          (keyup.space)="onTimePickerElementMouseUp($event)"
                          (mouseleave)="onTimePickerElementMouseLeave()"
                          pRipple
                        >
                            <span class="pi pi-chevron-down"></span>
                        </button>
                    </div>
                    <div class="p-separator" *ngIf="showSeconds">
                        <span>{{ timeSeparator }}</span>
                    </div>
                    <div class="p-second-picker" *ngIf="showSeconds">
                        <button
                          class="p-link"
                          type="button"
                          (keydown)="onContainerButtonKeydown($event)"
                          (keydown.enter)="incrementSecond($event)"
                          (keydown.space)="incrementSecond($event)"
                          (mousedown)="onTimePickerElementMouseDown($event, 2, 1)"
                          (mouseup)="onTimePickerElementMouseUp($event)"
                          (keyup.enter)="onTimePickerElementMouseUp($event)"
                          (keyup.space)="onTimePickerElementMouseUp($event)"
                          (mouseleave)="onTimePickerElementMouseLeave()"
                          pRipple
                        >
                            <span class="pi pi-chevron-up"></span>
                        </button>
                        <span><ng-container *ngIf="currentSecond < 10">0</ng-container>
                          {{ currentSecond }}</span>
                        <button
                          class="p-link"
                          type="button"
                          (keydown)="onContainerButtonKeydown($event)"
                          (keydown.enter)="decrementSecond($event)"
                          (keydown.space)="decrementSecond($event)"
                          (mousedown)="onTimePickerElementMouseDown($event, 2, -1)"
                          (mouseup)="onTimePickerElementMouseUp($event)"
                          (keyup.enter)="onTimePickerElementMouseUp($event)"
                          (keyup.space)="onTimePickerElementMouseUp($event)"
                          (mouseleave)="onTimePickerElementMouseLeave()"
                          pRipple
                        >
                            <span class="pi pi-chevron-down"></span>
                        </button>
                    </div>
                    <div class="p-ampm-picker" *ngIf="hourFormat == '12'">
                        <button class="p-link" type="button" (keydown)="onContainerButtonKeydown($event)"
                                (click)="toggleAMPM($event)" (keydown.enter)="toggleAMPM($event)" pRipple>
                            <span class="pi pi-chevron-up"></span>
                        </button>
                        <span>{{ pm ? 'PM' : 'AM' }}</span>
                        <button class="p-link" type="button" (keydown)="onContainerButtonKeydown($event)"
                                (click)="toggleAMPM($event)" (keydown.enter)="toggleAMPM($event)" pRipple>
                            <span class="pi pi-chevron-down"></span>
                        </button>
                    </div>
                </div>
                <div class="p-datepicker-buttonbar" *ngIf="showButtonBar">
                    <button type="button" (keydown)="onContainerButtonKeydown($event)"
                            (click)="onTodayButtonClick($event)" [ngClass]="[todayButtonStyleClass]"></button>
                    <button type="button" (keydown)="onContainerButtonKeydown($event)"
                            (click)="onClearButtonClick($event)" [ngClass]="[clearButtonStyleClass]"></button>
                </div>
                <ng-content select="p-footer"></ng-content>
                <ng-container *ngTemplateOutlet="footerTemplate"></ng-container>
            </div>
        </span>
